<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles/fileDetails.css">
</head>
<body>
    <div class="file-details-container">
        <h1>File Details</h1>
        <div class="file-details-card">
            <% if (isImage(file.filename)) { %>
                <div class="file-image">
                    <img src="/uploads/<%= file.filename %>" alt="Uploaded Image">
                </div>
            <% } else { %>
                <div class="file-icon">
                    <img src="/icons/<%= getIcon(file.filename) %>" alt="File Icon">
                </div>
            <% } %>
            <!-- <div class="file-info">
                <p><strong>File Name:</strong> <%= file.filename %></p>
                <p><strong>Uploaded on:</strong> <%= file.createdAt.toDateString() %></p>
                <a href="/download/<%= file._id %>" class="btn download-btn">Download File</a>
                <form id="delete-form" action="/delete/<%= file._id %>" method="POST" style="display:inline;">
                    <button type="submit" class="btn delete-btn">Delete File</button>
                </form>
            </div> -->

            <div class="file-info">
                <p><strong>File Name:</strong> <%= file.filename %></p>
                <p><strong>Uploaded on:</strong> <%= file.createdAt.toDateString() %></p>
                
                <!-- Rename form (initially hidden) -->
                <form id="rename-form" action="/rename/<%= file._id %>" method="POST" style="display: none;">
                    <label for="newFileName">New File Name:</label>
                    <input type="text" id="newFileName" name="newFileName" placeholder="Enter new file name" required>
                    <button type="submit" class="btn rename-btn">Save</button>
                    <button type="button" class="btn cancel-btn" id="cancel-btn">Cancel</button>
                </form>
                
                <!-- Edit button -->
                <button class="btn edit-btn" id="edit-btn">Edit Name</button>

                <a href="/download/<%= file._id %>" class="btn download-btn">Download File</a>
                <form id="delete-form" action="/delete/<%= file._id %>" method="POST" style="display:inline;">
                    <button type="submit" class="btn delete-btn">Delete File</button>
                </form>
            </div>
        </div>
        <a href="/dashboard" class="btn">Back to Dashboard</a>
    </div>

    <script>
        // JavaScript to toggle visibility of the rename form and buttons
        document.getElementById('edit-btn').addEventListener('click', function() {
            document.getElementById('rename-form').style.display = 'block';
            document.getElementById('edit-btn').style.display = 'none';
        });

        document.getElementById('cancel-btn').addEventListener('click', function() {
            document.getElementById('rename-form').style.display = 'none';
            document.getElementById('edit-btn').style.display = 'inline-block';
        });
    </script>

</body>
</html>
